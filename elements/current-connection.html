<!--
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="element-stuff-base.html">
<link rel="import" href="element-stuff-shared-styles.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="app-icons.html">

<dom-module id="current-connection">

  <template>
    <style include="element-stuff-shared-styles">
      #inf {
        font-size: 12px;
      }
      span {
        font-weight: bold;
      }
      button {
        border: 1px solid var(--input-border-color);
        border-radius: 5px;
        box-sizing: border-box;
        font-size: 11px;
        margin-left: 4px;
        display: inline-block;
        color: white;
        background: transparent;
        height: 24px;
        padding: 0 2px 0 4px;
        width: 120px;

      }
    </style>
    <template is="dom-repeat" items="{{connectionList}}">
      <div>
        <p id="inf">The variable <span>{{item.connection.1}}</span> of the component <span>{{item.connection.0}}</span> is
          connected with the variable <span>{{item.connection.3}}</span>
          of the component <span>{{item.connection.2}}</span></p>
        <button on-click="deleteConnection">Remove element</button>
      </div>
    </template>
  </template>
  <script>
    class CurrentConnection extends Polymer.Element {
      static get is() { return 'current-connection'; }

      static get properties() {
        return {
          connectionList: {
            type: Array,
            value() {
              return [];
            }
          }
        }
      }

      // Add information about the connection between the different components and the posibility of 
      // remove these connections

      addConnection(conn) {
        this.push('connectionList',{connection:[conn[0], conn[1], conn[2], conn[3]]});
      }

      deleteConnection(e) {
        if(window.confirm("Do you really want to delete this connection?")){
          const idx = e.model.index;
          this.splice('connectionList',idx, 1);
          var eventDisconnect = new CustomEvent('delete-connection',{'detail': e.model.item});
          this.dispatchEvent(eventDisconnect);
        }
      }
    }
    customElements.define(CurrentConnection.is, CurrentConnection);
  </script>
</dom-module>